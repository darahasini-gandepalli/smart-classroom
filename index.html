<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Classroom â€“ AI Notes + 3 Level Learning</title>
    <!-- Using Tailwind for the 'modern' look as it's common in senior-level prototypes, 
         but implementing logic in pure Vanilla JS as requested. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
        }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }
        .page-transition {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hidden-page {
            display: none !important;
        }
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
    "react": "https://esm.sh/react@^19.2.4",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>
</head>
<body class="min-h-screen">

    <!-- 1) LOGIN PAGE -->
    <div id="login-page" class="flex items-center justify-center min-h-screen p-4">
        <div class="glass-card w-full max-w-md p-8 rounded-3xl">
            <div class="text-center mb-8">
                <div class="bg-indigo-600 text-white w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                    </svg>
                </div>
                <h1 class="text-3xl font-bold tracking-tight">Smart Classroom</h1>
                <p class="text-slate-500 mt-2">Login to access your learning portal</p>
            </div>
            <form id="login-form" class="space-y-5">
                <div>
                    <label class="block text-sm font-semibold mb-1.5 ml-1">Roll Number</label>
                    <input type="text" id="roll-number" required placeholder="e.g. 101" 
                        class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none">
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-1.5 ml-1">Class / Section</label>
                    <input type="text" id="class-section" required placeholder="e.g. Class 10-A" 
                        class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none">
                </div>
                <button type="submit" 
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-indigo-100 transform active:scale-[0.98]">
                    Login to Classroom
                </button>
            </form>
        </div>
    </div>

    <!-- MAIN APP CONTAINER (CLASSROOM PORTAL) -->
    <div id="app-container" class="hidden-page min-h-screen">
        <!-- Header -->
        <header class="bg-white border-b border-slate-100 sticky top-0 z-50">
            <div class="max-w-6xl mx-auto px-4 h-20 flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="bg-indigo-600 p-2 rounded-lg text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 19 7.5 19s3.332-.477 4.5-1.253" />
                        </svg>
                    </div>
                    <div>
                        <h2 id="welcome-text" class="font-bold text-lg">Welcome</h2>
                        <p id="class-display" class="text-xs text-slate-500 font-medium"></p>
                    </div>
                </div>
                <button id="logout-btn" class="bg-slate-50 hover:bg-rose-50 hover:text-rose-600 text-slate-600 px-4 py-2 rounded-lg text-sm font-bold transition-all border border-slate-200">
                    Logout
                </button>
            </div>
        </header>

        <main class="max-w-6xl mx-auto px-4 py-10">
            
            <!-- 2) CLASSROOM PORTAL DASHBOARD -->
            <div id="portal-view" class="page-transition">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass-card p-8 rounded-3xl">
                        <h3 class="text-2xl font-bold mb-6 flex items-center">
                            <span class="mr-3 bg-indigo-100 text-indigo-600 p-2 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                                </svg>
                            </span>
                            Learning Hub
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold text-slate-600 mb-1.5">Select Subject</label>
                                <select id="subject-dropdown" class="w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-indigo-500 bg-slate-50">
                                    <option value="DLCO">Digital Logic (DLCO)</option>
                                    <option value="P&S">Probability & Stats (P&S)</option>
                                    <option value="ML">Machine Learning (ML)</option>
                                    <option value="AI">Artificial Intelligence (AI)</option>
                                    <option value="MEFA">Managerial Economics (MEFA)</option>
                                    <option value="DBMS">Database Systems (DBMS)</option>
                                    <option value="PYTHON">Python Programming</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-600 mb-1.5">Topic to Study</label>
                                <input type="text" id="topic-input" placeholder="e.g. Backpropagation, K-means" 
                                    class="w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-indigo-500 bg-slate-50">
                            </div>
                            <div class="grid grid-cols-1 gap-3 pt-4">
                                <button id="go-learning" class="flex items-center justify-between w-full bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-xl font-bold transition-all shadow-md group">
                                    <span>Go to Learning Module</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                                    </svg>
                                </button>
                                <button id="go-notes" class="flex items-center justify-between w-full bg-emerald-600 hover:bg-emerald-700 text-white p-4 rounded-xl font-bold transition-all shadow-md group">
                                    <span>Go to AI Smart Notes</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col justify-center space-y-4">
                        <div class="bg-indigo-50 p-6 rounded-3xl border border-indigo-100">
                            <h4 class="font-bold text-indigo-900 mb-2">Smart Recommendation</h4>
                            <p class="text-indigo-700 text-sm leading-relaxed">Based on your recent activity, we recommend starting with <strong class="text-indigo-900">Digital Logic</strong> basics.</p>
                        </div>
                        <div class="bg-emerald-50 p-6 rounded-3xl border border-emerald-100">
                            <h4 class="font-bold text-emerald-900 mb-2">Note Taker AI</h4>
                            <p class="text-emerald-700 text-sm leading-relaxed">Turn your messy class notes into structured bullet points in seconds using our AI summarizer.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3) 3-LEVEL LEARNING MODULE -->
            <div id="learning-view" class="hidden-page page-transition">
                <div class="mb-6 flex items-center justify-between">
                    <button class="back-to-portal text-sm font-bold text-slate-500 flex items-center hover:text-indigo-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                        Back to Portal
                    </button>
                    <div class="flex bg-slate-200 p-1 rounded-xl">
                        <button data-level="BASIC" class="level-tab px-4 py-2 rounded-lg text-xs font-bold transition-all bg-white text-indigo-600 shadow-sm">Basic</button>
                        <button data-level="STANDARD" class="level-tab px-4 py-2 rounded-lg text-xs font-bold transition-all text-slate-600 hover:bg-white/50">Standard</button>
                        <button data-level="ADVANCED" class="level-tab px-4 py-2 rounded-lg text-xs font-bold transition-all text-slate-600 hover:bg-white/50">Advanced</button>
                    </div>
                </div>

                <div class="glass-card rounded-3xl overflow-hidden min-h-[500px]">
                    <div id="learning-content-loader" class="hidden flex flex-col items-center justify-center h-[500px]">
                        <div class="loader mb-4"></div>
                        <p class="text-slate-500 animate-pulse font-medium">AI is generating your lesson...</p>
                    </div>
                    
                    <div id="learning-content-area">
                        <div class="bg-indigo-600 p-8 text-white">
                            <h2 id="learning-topic-title" class="text-3xl font-bold">Topic Name</h2>
                            <p id="learning-level-badge" class="mt-2 text-indigo-200 font-bold text-sm uppercase tracking-widest">Basic Level</p>
                        </div>
                        <div class="p-8 space-y-10">
                            <section>
                                <h4 class="text-lg font-bold text-indigo-600 mb-3 flex items-center">
                                    <span class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center mr-2 text-sm">1</span>
                                    Explanation
                                </h4>
                                <div id="explanation-text" class="text-slate-700 leading-relaxed prose prose-indigo">
                                    Select a topic to begin learning...
                                </div>
                            </section>

                            <section>
                                <h4 class="text-lg font-bold text-indigo-600 mb-3 flex items-center">
                                    <span class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center mr-2 text-sm">2</span>
                                    Example
                                </h4>
                                <div id="example-text" class="bg-slate-50 border border-slate-100 p-6 rounded-2xl text-slate-800 italic">
                                    Waiting for AI input...
                                </div>
                            </section>

                            <section>
                                <h4 class="text-lg font-bold text-indigo-600 mb-3 flex items-center">
                                    <span class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center mr-2 text-sm">3</span>
                                    Practice Question
                                </h4>
                                <div id="practice-area" class="bg-indigo-50/30 border border-indigo-100 p-6 rounded-2xl">
                                    <p id="question-text" class="font-bold text-indigo-900 mb-4"></p>
                                    <textarea placeholder="Write your answer here..." class="w-full h-32 p-4 rounded-xl border border-indigo-100 focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                                </div>
                            </section>

                            <div class="pt-6 border-t border-slate-100 flex justify-end">
                                <button id="next-level-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-xl transition-all shadow-lg flex items-center">
                                    Next Level
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4) AI SMART NOTES MODULE -->
            <div id="notes-view" class="hidden-page page-transition">
                <button class="back-to-portal mb-6 text-sm font-bold text-slate-500 flex items-center hover:text-emerald-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Portal
                </button>

                <div class="grid lg:grid-cols-2 gap-8">
                    <div class="glass-card p-8 rounded-3xl">
                        <h3 class="text-xl font-bold mb-4">Paste Your Notes</h3>
                        <textarea id="raw-notes-input" placeholder="Paste your lecture notes, messy text, or textbook snippets here..." 
                            class="w-full h-96 p-6 rounded-2xl border border-slate-200 bg-slate-50 outline-none focus:ring-2 focus:ring-emerald-500 transition-all font-mono text-sm"></textarea>
                        <button id="generate-notes-btn" class="w-full mt-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg flex items-center justify-center space-x-2">
                            <span id="gen-btn-text">Generate Smart Notes</span>
                            <div id="gen-btn-loader" class="loader hidden" style="width: 18px; height: 18px; border-width: 2px;"></div>
                        </button>
                    </div>

                    <div class="glass-card p-8 rounded-3xl flex flex-col">
                        <h3 class="text-xl font-bold mb-4 text-emerald-700">Structured Result</h3>
                        <div id="notes-result-placeholder" class="flex-1 flex flex-col items-center justify-center text-center text-slate-400 p-10 border-2 border-dashed border-slate-100 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-4 opacity-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                            </svg>
                            <p>AI structured notes will appear here.</p>
                        </div>
                        <div id="notes-result-area" class="hidden flex-1 space-y-6 overflow-y-auto pr-2">
                            <div>
                                <h5 class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">Summary</h5>
                                <p id="summary-output" class="text-slate-700 leading-relaxed bg-emerald-50/50 p-4 rounded-xl border border-emerald-100"></p>
                            </div>
                            <div>
                                <h5 class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">Key Highlights</h5>
                                <ul id="highlights-output" class="space-y-3">
                                    <!-- Dynamic points -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- AI Integration Scripts -->
    <script type="module">
        import { GoogleGenAI, Type } from "@google/genai";

        // APP STATE
        let currentUser = null;
        let selectedLevel = 'BASIC';
        let currentSubject = '';
        let currentTopic = '';

        const ai = new GoogleGenAI({ apiKey: "[[API_KEY_PLACEHOLDER]]" || process.env.API_KEY });

        // DOM ELEMENTS
        const loginPage = document.getElementById('login-page');
        const appContainer = document.getElementById('app-container');
        const loginForm = document.getElementById('login-form');
        const welcomeText = document.getElementById('welcome-text');
        const classDisplay = document.getElementById('class-display');
        const logoutBtn = document.getElementById('logout-btn');
        
        const portalView = document.getElementById('portal-view');
        const learningView = document.getElementById('learning-view');
        const notesView = document.getElementById('notes-view');

        const goLearningBtn = document.getElementById('go-learning');
        const goNotesBtn = document.getElementById('go-notes');
        const backToPortalBtns = document.querySelectorAll('.back-to-portal');

        const subjectDropdown = document.getElementById('subject-dropdown');
        const topicInput = document.getElementById('topic-input');

        // INITIALIZATION
        function init() {
            const savedUser = localStorage.getItem('smart_classroom_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showPortal();
            }
        }

        // AUTH LOGIC
        loginForm.onsubmit = (e) => {
            e.preventDefault();
            const roll = document.getElementById('roll-number').value;
            const cls = document.getElementById('class-section').value;
            
            currentUser = { rollNumber: roll, classSection: cls };
            localStorage.setItem('smart_classroom_user', JSON.stringify(currentUser));
            showPortal();
        };

        logoutBtn.onclick = () => {
            localStorage.removeItem('smart_classroom_user');
            location.reload();
        };

        function showPortal() {
            loginPage.classList.add('hidden-page');
            appContainer.classList.remove('hidden-page');
            portalView.classList.remove('hidden-page');
            learningView.classList.add('hidden-page');
            notesView.classList.add('hidden-page');

            welcomeText.innerText = `Welcome Student ${currentUser.rollNumber}`;
            classDisplay.innerText = currentUser.classSection;
        }

        // NAVIGATION
        backToPortalBtns.forEach(btn => {
            btn.onclick = () => {
                showPortal();
            };
        });

        goLearningBtn.onclick = () => {
            currentSubject = subjectDropdown.value;
            currentTopic = topicInput.value;
            if (!currentTopic) {
                alert("Please enter a topic name!");
                return;
            }
            portalView.classList.add('hidden-page');
            learningView.classList.remove('hidden-page');
            updateLearningView();
        };

        goNotesBtn.onclick = () => {
            currentSubject = subjectDropdown.value;
            currentTopic = topicInput.value;
            portalView.classList.add('hidden-page');
            notesView.classList.remove('hidden-page');
        };

        // 3-LEVEL LEARNING LOGIC
        const levelTabs = document.querySelectorAll('.level-tab');
        const nextLevelBtn = document.getElementById('next-level-btn');

        levelTabs.forEach(tab => {
            tab.onclick = () => {
                selectedLevel = tab.dataset.level;
                updateLearningView();
            };
        });

        nextLevelBtn.onclick = () => {
            if (selectedLevel === 'BASIC') selectedLevel = 'STANDARD';
            else if (selectedLevel === 'STANDARD') selectedLevel = 'ADVANCED';
            else {
                alert("You've mastered all levels for this topic!");
                return;
            }
            updateLearningView();
        };

        async function updateLearningView() {
            // Update UI State
            levelTabs.forEach(t => {
                if (t.dataset.level === selectedLevel) {
                    t.classList.add('bg-white', 'text-indigo-600', 'shadow-sm');
                    t.classList.remove('text-slate-600', 'hover:bg-white/50');
                } else {
                    t.classList.remove('bg-white', 'text-indigo-600', 'shadow-sm');
                    t.classList.add('text-slate-600', 'hover:bg-white/50');
                }
            });

            document.getElementById('learning-topic-title').innerText = currentTopic;
            document.getElementById('learning-level-badge').innerText = `${selectedLevel} LEVEL`;
            document.getElementById('learning-content-loader').classList.remove('hidden');
            document.getElementById('learning-content-area').classList.add('hidden');

            try {
                const prompt = `Provide educational content for Subject: ${currentSubject}, Topic: ${currentTopic}. 
                Level of detail: ${selectedLevel}. 
                - BASIC: Analogies, simple terms, slow learner focus.
                - STANDARD: Technical definitions, average student focus.
                - ADVANCED: Complex theory, rigorous detail, fast learner focus.
                Return JSON with fields: explanation, example, practiceQuestion.`;

                const response = await ai.models.generateContent({
                    model: 'gemini-3-flash-preview',
                    contents: prompt,
                    config: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: Type.OBJECT,
                            properties: {
                                explanation: { type: Type.STRING },
                                example: { type: Type.STRING },
                                practiceQuestion: { type: Type.STRING }
                            }
                        }
                    }
                });

                const data = JSON.parse(response.text);
                document.getElementById('explanation-text').innerHTML = `<p>${data.explanation}</p>`;
                document.getElementById('example-text').innerText = data.example;
                document.getElementById('question-text').innerText = data.practiceQuestion;

                document.getElementById('learning-content-loader').classList.add('hidden');
                document.getElementById('learning-content-area').classList.remove('hidden');

                if (selectedLevel === 'ADVANCED') {
                    nextLevelBtn.innerText = 'Back to Portal';
                    nextLevelBtn.onclick = showPortal;
                } else {
                    nextLevelBtn.innerText = 'Next Level';
                    nextLevelBtn.onclick = () => {
                        if (selectedLevel === 'BASIC') selectedLevel = 'STANDARD';
                        else if (selectedLevel === 'STANDARD') selectedLevel = 'ADVANCED';
                        updateLearningView();
                    };
                }
            } catch (err) {
                console.error(err);
                document.getElementById('explanation-text').innerText = "Oops! AI module failed to load. Please try again.";
                document.getElementById('learning-content-loader').classList.add('hidden');
                document.getElementById('learning-content-area').classList.remove('hidden');
            }
        }

        // SMART NOTES LOGIC
        const generateNotesBtn = document.getElementById('generate-notes-btn');
        const genBtnLoader = document.getElementById('gen-btn-loader');
        const genBtnText = document.getElementById('gen-btn-text');

        generateNotesBtn.onclick = async () => {
            const rawNotes = document.getElementById('raw-notes-input').value;
            if (!rawNotes.trim()) {
                alert("Please paste some notes first!");
                return;
            }

            genBtnLoader.classList.remove('hidden');
            genBtnText.innerText = "Analyzing...";
            generateNotesBtn.disabled = true;

            try {
                const prompt = `Summarize these student notes. Provide a concise overall summary and a list of key takeaway points.
                Notes: ${rawNotes}
                Return JSON with fields: summary (string), highlights (array of strings).`;

                const response = await ai.models.generateContent({
                    model: 'gemini-3-flash-preview',
                    contents: prompt,
                    config: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: Type.OBJECT,
                            properties: {
                                summary: { type: Type.STRING },
                                highlights: { type: Type.ARRAY, items: { type: Type.STRING } }
                            }
                        }
                    }
                });

                const data = JSON.parse(response.text);
                document.getElementById('summary-output').innerText = data.summary;
                
                const highlightsList = document.getElementById('highlights-output');
                highlightsList.innerHTML = '';
                data.highlights.forEach(h => {
                    const li = document.createElement('li');
                    li.className = "flex items-start bg-white p-3 rounded-xl border border-slate-100 shadow-sm";
                    li.innerHTML = `
                        <span class="text-emerald-500 mr-2 mt-0.5">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                            </svg>
                        </span>
                        <span class="text-sm font-medium text-slate-700">${h}</span>
                    `;
                    highlightsList.appendChild(li);
                });

                document.getElementById('notes-result-placeholder').classList.add('hidden');
                document.getElementById('notes-result-area').classList.remove('hidden');
            } catch (err) {
                console.error(err);
                alert("Failed to generate notes. Check your internet connection.");
            } finally {
                genBtnLoader.classList.add('hidden');
                genBtnText.innerText = "Generate Smart Notes";
                generateNotesBtn.disabled = false;
            }
        };

        init();
    </script>
</body>
</html>